{
  "version": 3,
  "sources": ["../../@shopify/hydrogen/vendor/react-server-dom-vite/esm/react-server-dom-vite-client-proxy.js"],
  "sourcesContent": ["/**\n* @license React\n * react-server-dom-vite-client-proxy.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED } from 'react';\n\n// Store of components discovered during RSC to load\n// them later when consuming the response in SSR.\nglobalThis.__COMPONENT_INDEX = {}; // Store to get module references for long strings\n// when rendering in RSC (strings cannot be wrapped Proxy).\n\nglobalThis.__STRING_REFERENCE_INDEX = {};\nvar MODULE_TAG = Symbol.for('react.module.reference');\nvar STRING_SIZE_LIMIT = 64;\nvar FN_RSC_ERROR = 'Functions exported from client components cannot be called or used as constructors from a server component.';\nfunction isRsc() {\n  var currentDispatcher = __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher.current;\n  return !!(currentDispatcher && currentDispatcher.isRsc);\n}\n\nfunction createModuleReference(id, value, name, isDefault) {\n  var moduleRef = Object.create(null);\n  moduleRef.$$typeof = MODULE_TAG;\n  moduleRef.filepath = id;\n  moduleRef.name = isDefault ? 'default' : name; // Store component in a global index during RSC to use it later in SSR\n\n  globalThis.__COMPONENT_INDEX[id] = Object.defineProperty(globalThis.__COMPONENT_INDEX[id] || Object.create(null), moduleRef.name, {\n    value: value,\n    writable: true\n  });\n  return moduleRef;\n} // A ClientProxy behaves as a module reference for the Flight\n// runtime (RSC) and as a real component for the Fizz runtime (SSR).\n// Note that this is not used in browser environments.\n\n\nfunction wrapInClientProxy(_ref) {\n  var id = _ref.id,\n      name = _ref.name,\n      isDefault = _ref.isDefault,\n      value = _ref.value;\n  var type = typeof value;\n\n  if (value === null || type !== 'object' && type !== 'function') {\n    if (type === 'string' && value.length >= STRING_SIZE_LIMIT) {\n      var _moduleRef = createModuleReference(id, value, name, isDefault);\n\n      globalThis.__STRING_REFERENCE_INDEX[value] = _moduleRef;\n    }\n\n    return value;\n  }\n\n  var moduleRef = createModuleReference(id, value, name, isDefault);\n\n  var get = function (target, prop, receiver) {\n    if (prop === '$$unwrappedValue') return value;\n    if (prop === '$$moduleReference') return moduleRef;\n    return Reflect.get(isRsc() ? moduleRef : target, prop, receiver);\n  };\n\n  return new Proxy(value, type === 'object' ? {\n    get: get\n  } : {\n    get: get,\n    apply: function () {\n      if (isRsc()) throw new Error(FN_RSC_ERROR + (\" Calling \\\"\" + name + \"\\\".\"));\n      return Reflect.apply.apply(Reflect, arguments);\n    },\n    construct: function () {\n      if (isRsc()) throw new Error(FN_RSC_ERROR + (\" Instantiating \\\"\" + name + \"\\\".\"));\n      return Reflect.construct.apply(Reflect, arguments);\n    }\n  });\n}\n\nexport { FN_RSC_ERROR, MODULE_TAG, STRING_SIZE_LIMIT, isRsc, wrapInClientProxy };\n"],
  "mappings": ";;;;;;;;AAUA,mBAAmE;AAInE,WAAW,oBAAoB,CAAC;AAGhC,WAAW,2BAA2B,CAAC;AACvC,IAAI,aAAa,OAAO,IAAI,wBAAwB;AACpD,IAAI,oBAAoB;AACxB,IAAI,eAAe;AACnB,SAAS,QAAQ;AACf,MAAI,oBAAoB,gEAAmD,uBAAuB;AAClG,SAAO,CAAC,EAAE,qBAAqB,kBAAkB;AACnD;AAEA,SAAS,sBAAsB,IAAI,OAAO,MAAM,WAAW;AACzD,MAAI,YAAY,uBAAO,OAAO,IAAI;AAClC,YAAU,WAAW;AACrB,YAAU,WAAW;AACrB,YAAU,OAAO,YAAY,YAAY;AAEzC,aAAW,kBAAkB,MAAM,OAAO,eAAe,WAAW,kBAAkB,OAAO,uBAAO,OAAO,IAAI,GAAG,UAAU,MAAM;AAAA,IAChI;AAAA,IACA,UAAU;AAAA,EACZ,CAAC;AACD,SAAO;AACT;AAKA,SAAS,kBAAkB,MAAM;AAC/B,MAAI,KAAK,KAAK,IACV,OAAO,KAAK,MACZ,YAAY,KAAK,WACjB,QAAQ,KAAK;AACjB,MAAI,OAAO,OAAO;AAElB,MAAI,UAAU,QAAQ,SAAS,YAAY,SAAS,YAAY;AAC9D,QAAI,SAAS,YAAY,MAAM,UAAU,mBAAmB;AAC1D,UAAI,aAAa,sBAAsB,IAAI,OAAO,MAAM,SAAS;AAEjE,iBAAW,yBAAyB,SAAS;AAAA,IAC/C;AAEA,WAAO;AAAA,EACT;AAEA,MAAI,YAAY,sBAAsB,IAAI,OAAO,MAAM,SAAS;AAEhE,MAAI,MAAM,SAAU,QAAQ,MAAM,UAAU;AAC1C,QAAI,SAAS;AAAoB,aAAO;AACxC,QAAI,SAAS;AAAqB,aAAO;AACzC,WAAO,QAAQ,IAAI,MAAM,IAAI,YAAY,QAAQ,MAAM,QAAQ;AAAA,EACjE;AAEA,SAAO,IAAI,MAAM,OAAO,SAAS,WAAW;AAAA,IAC1C;AAAA,EACF,IAAI;AAAA,IACF;AAAA,IACA,OAAO,WAAY;AACjB,UAAI,MAAM;AAAG,cAAM,IAAI,MAAM,gBAAgB,eAAgB,OAAO,KAAM;AAC1E,aAAO,QAAQ,MAAM,MAAM,SAAS,SAAS;AAAA,IAC/C;AAAA,IACA,WAAW,WAAY;AACrB,UAAI,MAAM;AAAG,cAAM,IAAI,MAAM,gBAAgB,qBAAsB,OAAO,KAAM;AAChF,aAAO,QAAQ,UAAU,MAAM,SAAS,SAAS;AAAA,IACnD;AAAA,EACF,CAAC;AACH;",
  "names": []
}
